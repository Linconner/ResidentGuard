<header class="topico">
  <span id="titulo-span"></span>
  <svg
    id="botaoicone"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    stroke="currentColor"
  >
    <path
      d="M4 6H20M4 12H14M4 18H9"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </svg>

  <!-- Menu dropdown -->
  <div class="navbarmenu" id="navbarmenu">
    <div class="itensnavbar">
      <a href="RegistroM.html" class="nav-item">
        <i class="fi fi-sr-user-pen"></i>
        <h3 class="itenvey">Registro Moradores</h3>
      </a>
      <a href="RegistroV.html" class="nav-item">
        <i class="fi fi-sr-user-pen"></i>
        <h3 class="itenvey">Registro Visitantes</h3>
      </a>
      <a href="RegistroEN.html" class="nav-item">
        <i class="fi fi-sr-gifts"></i>
        <h3 class="itenvey">Registro Encomendas</h3>
      </a>
      <a href="RegistroE.html" class="nav-item">
        <i class="fi fi-sr-calendar-star"></i>
        <h3 class="itenvey">Registro Eventos</h3>
      </a>
      <a href="Consulta.html" class="nav-item">
        <i class="fi fi-sr-search-alt"></i>
        <h3 class="itenvey">Consulta</h3>
      </a>
      <a href="Adm.html" class="nav-item">
        <i class="fi fi-sr-administrator-alt"></i>
        <h3 class="itenvey">Adm</h3>
      </a>

      <a href="/index.html" class="nav-item">
        <i class="fi fi-sr-administrator-alt"></i>
        <h3 class="itenvey">Sair</h3>
      </a>
    </div>
  </div>
</header>

<!-- Overlay de fundo -->
<div id="blurOverlay"></div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const botaoicone = document.getElementById("botaoicone");
    const navbar = document.getElementById("navbarmenu");
    const blurOverlay = document.getElementById("blurOverlay");
    const navItems = document.querySelectorAll(".nav-item");

    if (!botaoicone || !navbar || !blurOverlay) {
      console.error("Elementos essenciais não encontrados!");
      return;
    }

    // Ativa o item atual conforme URL
    navItems.forEach((link) => {
      if (link.href === location.href) link.classList.add("active");
    });

    // Abrir/fechar menu
    botaoicone.addEventListener("click", function (event) {
      event.stopPropagation();
      navbar.classList.toggle("ativa");
      blurOverlay.classList.toggle("ativo");
    });

    // Fechar se clicar fora
    document.addEventListener("click", function (event) {
      const isClickInsideNavbar = navbar.contains(event.target);
      const isClickOnButton = event.target.closest("#botaoicone");
      if (
        !isClickInsideNavbar &&
        !isClickOnButton &&
        navbar.classList.contains("ativa")
      ) {
        navbar.classList.remove("ativa");
        blurOverlay.classList.remove("ativo");
      }
    });

    // Clique em item → fecha menu
    navItems.forEach((item) => {
      item.addEventListener("click", function () {
        navItems.forEach((navItem) => navItem.classList.remove("active"));
        this.classList.add("active");
        setTimeout(() => {
          navbar.classList.remove("ativa");
          blurOverlay.classList.remove("ativo");
        }, 300);
      });
    });
  });
</script>
